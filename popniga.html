<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tahlil App Redesigned</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./aseet/tahlil.css">
   <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Poppins', 'sans-serif'],
                    },
                    colors: {
                        primary: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            200: '#bae6fd',
                            300: '#7dd3fc',
                            400: '#38bdf8',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                            800: '#075985',
                            900: '#0c4a6e',
                        },
                    },
                },
            },
        }
    </script>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-200 transition-colors duration-300">
    <div class="min-h-screen flex flex-col">
        <nav class="bg-white dark:bg-gray-800 shadow-lg">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between h-16">
                    <div class="flex items-center">
                        <span class="text-2xl font-semibold text-primary-600 dark:text-primary-400">Tahlil</span>
                    </div>
                    <div class="flex items-center space-x-4">
                        <button id="darkModeToggle" class="p-2 rounded-full text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-primary-500">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                            </svg>
                        </button>
                        <button id="settingsBtn" class="p-2 rounded-full text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-primary-500">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </nav>

        <main class="flex-grow container mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="flex justify-center mb-8">
                <div class="inline-flex rounded-md shadow-sm" role="group">
                    <button id="tabPendek" class="px-4 py-2 text-sm font-medium rounded-l-lg bg-primary-500 text-white hover:bg-primary-600 focus:outline-none focus:ring-2 focus:ring-primary-300">
                        Tahlil Pendek
                    </button>
                    <button id="tabPanjang" class="px-4 py-2 text-sm font-medium rounded-r-lg bg-gray-200 text-gray-700 hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-300">
                        Tahlil Panjang
                    </button>
                </div>
            </div>

            <div id="tahlilContent" class="space-y-6"></div>
        </main>

        <footer class="bg-white dark:bg-gray-800 shadow-lg mt-8">
            <div class="max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8">
                <p class="text-center text-gray-500 dark:text-gray-400 text-sm">
                    Â© 2024 Tahlil App. All rights reserved.
                </p>
            </div>
        </footer>
    </div>

    <button id="scrollToTopBtn" class="fixed bottom-4 right-4 bg-primary-500 text-white p-3 rounded-full shadow-lg hover:bg-primary-600 focus:outline-none focus:ring-2 focus:ring-primary-300 hidden transition-opacity duration-300">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18" />
        </svg>
    </button>

    <div id="settingsModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full m-4">
            <h2 class="text-2xl font-semibold mb-4 text-primary-600 dark:text-primary-400">Settings</h2>
            <div class="space-y-4">
                <div>
                    <label for="arabicFontSize" class="block text-sm font-medium mb-1">Arabic Font Size</label>
                    <input type="range" id="arabicFontSize" min="16" max="36" step="1" class="w-full">
                    <span id="arabicFontSizeValue" class="text-sm block mt-1"></span>
                </div>
                <div>
                    <label for="arabicFont" class="block text-sm font-medium mb-1">Arabic Font</label>
                    <select id="arabicFont" class="w-full rounded-md border-gray-300 shadow-sm focus:border-primary-300 focus:ring focus:ring-primary-200 focus:ring-opacity-50 dark:bg-gray-700 dark:border-gray-600">
                        <option value="UthmanicHafs">UthmanicHafs</option>
                        <option value="Scheherazade New">Scheherazade New</option>
                        <option value="Noto Naskh Arabic">Noto Naskh Arabic</option>
                        <option value="Amiri">Amiri</option>
                        <option value="'Lateef', cursive">Lateef</option>
                        <option value="font1">HQPB7</option>
                        <option value="font2">MSHQ</option>
                        <option value="font3">PageD1</option>
                        <option value="font4">PageD2</option>
                        <option value="font5">PageQ1</option>
                        <option value="font6">PageQ2</option>
                        <option value="font7">PageQ3</option>
                    </select>
                </div>
                <div class="flex items-center">
                    <input type="checkbox" id="showTitle" class="rounded border-gray-300 text-primary-600 shadow-sm focus:border-primary-300 focus:ring focus:ring-primary-200 focus:ring-opacity-50">
                    <label for="showTitle" class="ml-2 block text-sm">Show Title</label>
                </div>
                <div class="flex items-center">
                    <input type="checkbox" id="showArabic" class="rounded border-gray-300 text-primary-600 shadow-sm focus:border-primary-300 focus:ring focus:ring-primary-200 focus:ring-opacity-50">
                    <label for="showArabic" class="ml-2 block text-sm">Show Arabic</label>
                </div>
                <div class="flex items-center">
                    <input type="checkbox" id="showLatin" class="rounded border-gray-300 text-primary-600 shadow-sm focus:border-primary-300 focus:ring focus:ring-primary-200 focus:ring-opacity-50">
                    <label for="showLatin" class="ml-2 block text-sm">Show Latin</label>
                </div>
                <div class="flex items-center">
                    <input type="checkbox" id="showTranslation" class="rounded border-gray-300 text-primary-600 shadow-sm focus:border-primary-300 focus:ring focus:ring-primary-200 focus:ring-opacity-50">
                    <label for="showTranslation" class="ml-2 block text-sm">Show Translation</label>
                </div>
            </div>
            <div class="mt-6 flex justify-between">
                <button id="resetSettings" class="px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-300">
                    Reset to Default
                </button>
                <button id="closeSettings" class="px-4 py-2 bg-primary-500 text-white rounded hover:bg-primary-600 focus:outline-none focus:ring-2 focus:ring-primary-300">
                    Close
                </button>
            </div>
        </div>
    </div>

    <script>
        let tahlilData = [];
        let currentTab = 'pendek';

        // DOM elements
        const tahlilContent = document.getElementById('tahlilContent');
        const darkModeToggle = document.getElementById('darkModeToggle');
        const settingsBtn = document.getElementById('settingsBtn');
        const settingsModal = document.getElementById('settingsModal');
        const closeSettings = document.getElementById('closeSettings');
        const arabicFontSize = document.getElementById('arabicFontSize');
        const arabicFontSizeValue = document.getElementById('arabicFontSizeValue');
        const showTitle = document.getElementById('showTitle');
        const showArabic = document.getElementById('showArabic');
        const showLatin = document.getElementById('showLatin');
        const showTranslation = document.getElementById('showTranslation');
        const arabicFont = document.getElementById('arabicFont');
        const resetSettings = document.getElementById('resetSettings');
        const tabPendek = document.getElementById('tabPendek');
        const tabPanjang = document.getElementById('tabPanjang');
        const scrollToTopBtn = document.getElementById('scrollToTopBtn');

        async function fetchTahlilData(type) {
            try {
                const response = await fetch(`/aseet/data/tahlil${type}.json`);
                tahlilData = await response.json();
                renderTahlilContent();
            } catch (error) {
                console.error(`Error fetching tahlil ${type} data:`, error);
                tahlilContent.innerHTML = `<p class="text-red-500">Error loading data. Please try again later.</p>`;
            }
        }

        function createTahlilSection(section) {
            return `
                <div class="bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6 transition-all duration-300 hover:shadow-xl">
                    ${localStorage.getItem('showTitle') === 'true' ? `<h2 class="text-xl font-semibold mb-4 text-primary-600 dark:text-primary-400">${section.title}</h2>` : ''}
                    <div class="space-y-4">
                        ${localStorage.getItem('showArabic') === 'true' ? `
                        <div>
                            <h3 class="font-medium text-gray-700 dark:text-gray-300 mb-2">Arabic:</h3>
                            <p class="text-right arabic" style="font-family: var(--arabic-font); font-size: ${localStorage.getItem('arabicFontSize')}px">${section.arabic}</p>
                        </div>
                        ` : ''}
                        ${localStorage.getItem('showLatin') === 'true' ? `
                        <div>
                            <h3 class="font-medium text-gray-700 dark:text-gray-300 mb-2">Latin:</h3>
                            <p class="italic text-gray-600 dark:text-gray-400">${section.latin}</p>
                        </div>
                        ` : ''}
                        ${localStorage.getItem('showTranslation') === 'true' ? `
                        <div>
                            <h3 class="font-medium text-gray-700 dark:text-gray-300 mb-2">Translation:</h3>
                            <p class="text-gray-600 dark:text-gray-400">${section.translation}</p>
                        </div>
                        ` : ''}
                    </div>
                </div>
            `;
        }

        function renderTahlilContent() {
            tahlilContent.innerHTML = '';
            tahlilData.forEach(section => {
                tahlilContent.innerHTML += createTahlilSection(section);
            });
        }

        function updateSettings() {
            localStorage.setItem('arabicFontSize', arabicFontSize.value);
            localStorage.setItem('arabicFont', arabicFont.value);
            localStorage.setItem('showTitle', showTitle.checked);
            localStorage.setItem('showArabic', showArabic.checked);
            localStorage.setItem('showLatin', showLatin.checked);
            localStorage.setItem('showTranslation', showTranslation.checked);
            arabicFontSizeValue.textContent = `${arabicFontSize.value}px`;
            document.documentElement.style.setProperty('--arabic-font', `'${arabicFont.value}', Arial, sans-serif`);
renderTahlilContent();
}

function resetToDefault() {
    arabicFontSize.value = 24;
    arabicFont.value = 'UthmanicHafs';
    showTitle.checked = true;
    showArabic.checked = true;
    showLatin.checked = true;
    showTranslation.checked = true;
    updateSettings();
}

function loadSettings() {
    arabicFontSize.value = localStorage.getItem('arabicFontSize') || 24;
    arabicFont.value = localStorage.getItem('arabicFont') || 'UthmanicHafs';
    showTitle.checked = localStorage.getItem('showTitle') !== 'false';
    showArabic.checked = localStorage.getItem('showArabic') !== 'false';
    showLatin.checked = localStorage.getItem('showLatin') !== 'false';
    showTranslation.checked = localStorage.getItem('showTranslation') !== 'false';
    document.documentElement.style.setProperty('--arabic-font', `'${arabicFont.value}', Arial, sans-serif`);
    arabicFontSizeValue.textContent = `${arabicFontSize.value}px`;
    updateSettings();
}

function switchTab(tab) {
    if (currentTab !== tab) {
        currentTab = tab;
        const activeClass = 'bg-primary-500 text-white';
        const inactiveClass = 'bg-gray-200 text-gray-700';
        
        if (tab === 'pendek') {
            tabPendek.classList.remove(...inactiveClass.split(' '));
            tabPendek.classList.add(...activeClass.split(' '));
            tabPanjang.classList.remove(...activeClass.split(' '));
            tabPanjang.classList.add(...inactiveClass.split(' '));
        } else {
            tabPanjang.classList.remove(...inactiveClass.split(' '));
            tabPanjang.classList.add(...activeClass.split(' '));
            tabPendek.classList.remove(...activeClass.split(' '));
            tabPendek.classList.add(...inactiveClass.split(' '));
        }
    }
    
    fetchTahlilData(tab);
}

// Event Listeners
darkModeToggle.addEventListener('click', () => {
    document.documentElement.classList.toggle('dark');
    localStorage.setItem('darkMode', document.documentElement.classList.contains('dark'));
});

settingsBtn.addEventListener('click', () => {
    settingsModal.classList.remove('hidden');
    settingsModal.classList.add('flex');
});

closeSettings.addEventListener('click', () => {
    settingsModal.classList.add('hidden');
    settingsModal.classList.remove('flex');
});

[arabicFontSize, arabicFont, showTitle, showArabic, showLatin, showTranslation].forEach(element => {
    element.addEventListener('change', updateSettings);
});

resetSettings.addEventListener('click', resetToDefault);

tabPendek.addEventListener('click', () => switchTab('pendek'));
tabPanjang.addEventListener('click', () => switchTab('panjang'));

// Scroll to top functionality
function scrollToTop() {
    window.scrollTo({
        top: 0,
        behavior: 'smooth'
    });
}

scrollToTopBtn.addEventListener('click', scrollToTop);

window.addEventListener('scroll', function() {
    if (window.pageYOffset > 100) {
        scrollToTopBtn.classList.remove('hidden');
        scrollToTopBtn.classList.add('flex');
    } else {
        scrollToTopBtn.classList.add('hidden');
        scrollToTopBtn.classList.remove('flex');
    }
});

// Initialize
function init() {
    if (localStorage.getItem('darkMode') === 'true') {
        document.documentElement.classList.add('dark');
    }

    loadSettings();
    switchTab('pendek'); // Start with Tahlil Pendek by default
}

init();
    </script>
</body>
</html>